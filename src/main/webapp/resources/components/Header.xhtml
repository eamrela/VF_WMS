<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:WMS="http://xmlns.jcp.org/jsf/composite/components"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <!-- INTERFACE -->
    <cc:interface>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <script>
            setInterval(function() {
                $(".updateNotificationVar").click();
            }, 60000);
            
        </script>
        <h:form id="notificationForm">
        <nav class="site-navbar navbar navbar-inverse navbar-fixed-top navbar-mega navbar-inverse"
             role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle hamburger hamburger-close navbar-toggle-left hided"
                        data-toggle="menubar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="hamburger-bar"></span>
                </button>
                <button type="button" class="navbar-toggle collapsed" data-target="#site-navbar-collapse"
                        data-toggle="collapse">
                    <i class="icon md-more" aria-hidden="true"></i>
                </button>
                <a class="navbar-brand navbar-brand-center" href="#">
                    <img class="navbar-brand-logo navbar-brand-logo-normal" src="#{resource['assets/photos/logo.png']}"
                         title="VF WMS"/>
                    <img class="navbar-brand-logo navbar-brand-logo-special" src="#{resource['assets/photos/logo-blue.png']}"
                         title="VF WMS"/>
                    <span class="navbar-brand-text hidden-xs"> VF WMS</span>
                </a>
                <button type="button" class="navbar-toggle collapsed" data-target="#site-navbar-search"
                        data-toggle="collapse">
                    <span class="sr-only">Toggle Search</span>
                    <i class="icon md-search" aria-hidden="true"></i>
                </button>
            </div>

            <div class="navbar-container container-fluid">
                <!-- Navbar Collapse -->
                <div class="collapse navbar-collapse navbar-collapse-toolbar" id="site-navbar-collapse">
                    <!-- Navbar Toolbar -->
                    <ul class="nav navbar-toolbar">
                        <li class="hidden-float" id="toggleMenubar">
                            <a data-toggle="menubar" href="#" role="button">
                                <i class="icon hamburger hamburger-arrow-left">
                                    <span class="sr-only">Toggle menubar</span>
                                    <span class="hamburger-bar"></span>
                                </i>
                            </a>
                        </li>
                        <li class="hidden-xs" id="toggleFullscreen">
                            <a class="icon icon-fullscreen" data-toggle="fullscreen" href="#" role="button">
                                <span class="sr-only">Toggle fullscreen</span>
                            </a>
                        </li>
<!--                        <li class="hidden-float">
                            <a class="icon md-search" data-toggle="collapse" href="#" data-target="#site-navbar-search"
                               role="button">
                                <span class="sr-only">Toggle Search</span>
                            </a>
                        </li>-->

                    </ul>
                    <!-- End Navbar Toolbar -->

                    <!-- Navbar Toolbar Right -->
                    <ul class="nav navbar-toolbar navbar-right navbar-toolbar-right">

                        <li class="dropdown">
                            <a class="navbar-avatar dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false"
                               data-animation="scale-up" role="button">
                                <span class="avatar avatar-online">
                                    <img src="#{resource['assets/portraits/ericsson_logo.png']}" alt="..."/>
                                    <i></i>
                                </span>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                <li role="presentation">
                                    <a href="#{request.contextPath}/logout" role="menuitem"><i class="icon md-power" aria-hidden="true"></i> Logout</a>
                                </li>
                            </ul>
                        </li>
        <li class="dropdown">
            <a data-toggle="dropdown" href="javascript:void(0)" title="Notifications" aria-expanded="false"
               data-animation="scale-up" role="button">
                <i class="icon md-notifications" aria-hidden="true"></i>
                <span class="badge badge-danger up">
                    <h:outputText id="notiBadge" value="#{notificationsController.numberOfNotifications}"/>
                </span>
            </a>
            <ul class="dropdown-menu dropdown-menu-right dropdown-menu-media" role="menu">
       
                <li class="dropdown-menu-header" role="presentation">
                    <h5>NOTIFICATIONS</h5>
                    <span class="label label-round label-danger">New 
                     <h:outputText id="notiBadge2" value="#{notificationsController.numberOfNotifications}"/>
                    </span>
                </li>

                <li class="list-group" role="presentation">
                    <div data-role="container">
                        <div data-role="content">
                           
            <p:commandButton  class="updateNotificationVar" id="updateNotification" 
                              widgetVar="updateNotificationVar" style="display:none"
                              update="notiBadge,notiBadge2,uiRepeat"
                              actionListener="#{notificationsController.updateNotification}">
            </p:commandButton> 
                             <p:dataList  id="uiRepeat" value="#{notificationsController.notificationPerRegion}" var="noti" type="definition">
                               <a class="list-group-item" href="#" role="menuitem">
                                <div class="media">
                                    <div class="media-left padding-right-10">
                                        <i class="icon md-receipt bg-red-600 white icon-circle" aria-hidden="true"></i>
                                    </div>
                                    <div class="media-body">
                                        <h6 class="media-heading">#{noti.notiDescription}</h6>
                                        <time class="media-meta" datetime="#{noti.notiTime}">#{noti.notiTime}</time>
                                    </div>
                                </div>
                                </a>
                             </p:dataList>
                        </div>
                    </div>
                </li>
                <li class="dropdown-menu-footer" role="presentation">
                    <a class="dropdown-menu-footer-btn" href="javascript:void(0)" role="button">
                        <i class="icon md-settings" aria-hidden="true"></i>
                    </a>
                    <a href="javascript:void(0)" role="menuitem">
                        All notifications
                    </a>
                </li>
            </ul>
        </li>
<!--        <li id="toggleChat">
            <a data-toggle="site-sidebar" href="javascript:void(0)" title="Chat" data-url="../site-sidebar.tpl">
                <i class="icon md-comment" aria-hidden="true"></i>
            </a>
        </li>-->
                    </ul>
                    <!-- End Navbar Toolbar Right -->
                </div>
                <!-- End Navbar Collapse -->

                <WMS:SearchBar/>

            </div>
        </nav>
        </h:form> 
    </cc:implementation>
</html>